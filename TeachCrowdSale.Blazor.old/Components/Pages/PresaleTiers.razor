<section id="sales" class="section-padding">
    <div class="container">
        <div class="section-header text-center">
            <h2>Presale Tiers</h2>
            <p class="lead">Multi-tiered structure with transparent pricing and allocation</p>
        </div>

        <div class="current-tier-info text-center mb-5">
            <div class="tier-badge">
                <span>Current Tier: <span id="activeTierLabel">Tier 2</span></span>
            </div>
            <h3 class="mb-3">Join the <span id="currentTierName">Community Round</span> now!</h3>
            <p class="lead mb-4">Don't miss out on the opportunity to participate in our presale at the current rate of <strong>$<span id="currentTierPrice">0.045</span></strong> per token.</p>
            <div class="d-flex justify-content-center">
                <div class="presale-stats me-4">
                    <div class="stat-number" id="totalRaised">$3,450,000</div>
                    <div class="stat-label">Total Raised</div>
                </div>
                <div class="presale-stats me-4">
                    <div class="stat-number" id="tokensRemaining">72.5M</div>
                    <div class="stat-label">Tokens Remaining</div>
                </div>
                <div class="presale-stats">
                    <div class="stat-number" id="participants">1,842</div>
                    <div class="stat-label">Participants</div>
                </div>
            </div>
        </div>

        <div class="tiers-container mb-5">
            <!-- Tier 1 -->
            <div class="tier-card">
                <div class="tier-header">
                    <div class="tier-badge completed">Completed</div>
                    <h4 class="tier-title">Tier 1</h4>
                    <h4 class="tier-price">$0.035</h4>
                    <p class="tier-subtitle">Seed Round</p>
                </div>
                <div class="tier-details">
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Allocation</span>
                        <span class="tier-detail-value">75M Tokens</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Min Purchase</span>
                        <span class="tier-detail-value">$100</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Max Purchase</span>
                        <span class="tier-detail-value">$50,000</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Vesting at TGE</span>
                        <span class="tier-detail-value">10%</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Vesting Period</span>
                        <span class="tier-detail-value">18 Months</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Status</span>
                        <span class="tier-detail-value text-success">100% Sold</span>
                    </div>
                </div>
            </div>

            <!-- Tier 2 -->
            <div class="tier-card active">
                <div class="tier-header">
                    <div class="tier-badge active">Active Now</div>
                    <h4 class="tier-title">Tier 2</h4>
                    <h4 class="tier-price">$0.045</h4>
                    <p class="tier-subtitle">Community Round</p>
                </div>
                <div class="tier-details">
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Allocation</span>
                        <span class="tier-detail-value">100M Tokens</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Min Purchase</span>
                        <span class="tier-detail-value">$100</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Max Purchase</span>
                        <span class="tier-detail-value">$25,000</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Vesting at TGE</span>
                        <span class="tier-detail-value">15%</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Vesting Period</span>
                        <span class="tier-detail-value">15 Months</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Status</span>
                        <span class="tier-detail-value">72.5% Sold</span>
                    </div>
                </div>
                <div class="tier-cta">
                    <a href="#purchase-form" class="btn btn-primary">Purchase Now</a>
                </div>
            </div>

            <!-- Tier 3 -->
            <div class="tier-card">
                <div class="tier-header">
                    <div class="tier-badge upcoming">Upcoming</div>
                    <h4 class="tier-title">Tier 3</h4>
                    <h4 class="tier-price">$0.055</h4>
                    <p class="tier-subtitle">Growth Round</p>
                </div>
                <div class="tier-details">
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Allocation</span>
                        <span class="tier-detail-value">100M Tokens</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Min Purchase</span>
                        <span class="tier-detail-value">$100</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Max Purchase</span>
                        <span class="tier-detail-value">$10,000</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Vesting at TGE</span>
                        <span class="tier-detail-value">20%</span>
                    </div>
                    <div class="tier-detail-item">
                        <span class="tier-detail-label">Vesting Period</span>
                        <span class="tier-detail-value">12 Months</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="tiers-table-container">
            <h3 class="text-center mb-4">All Presale Tiers</h3>
            <div class="table-responsive">
                <table class="table table-bordered">
                    <thead class="thead-dark">
                    <tr>
                        <th>Tier</th>
                        <th>Price</th>
                        <th>Allocation</th>
                        <th>Min/Max Purchase</th>
                        <th>Vesting</th>
                        <th>Status</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Tier 1: Seed Round</td>
                        <td>$0.035</td>
                        <td>75M Tokens</td>
                        <td>$100 / $50,000</td>
                        <td>10% at TGE, 18 months</td>
                        <td><span class="badge bg-success">Completed</span></td>
                    </tr>
                    <tr class="table-active">
                        <td>Tier 2: Community Round</td>
                        <td>$0.045</td>
                        <td>100M Tokens</td>
                        <td>$100 / $25,000</td>
                        <td>15% at TGE, 15 months</td>
                        <td><span class="badge bg-primary">Active</span></td>
                    </tr>
                    <tr>
                        <td>Tier 3: Growth Round</td>
                        <td>$0.055</td>
                        <td>100M Tokens</td>
                        <td>$100 / $10,000</td>
                        <td>20% at TGE, 12 months</td>
                        <td><span class="badge bg-secondary">Upcoming</span></td>
                    </tr>
                    <tr>
                        <td>Tier 4: Expansion Round</td>
                        <td>$0.070</td>
                        <td>75M Tokens</td>
                        <td>$100 / $5,000</td>
                        <td>20% at TGE, 9 months</td>
                        <td><span class="badge bg-secondary">Upcoming</span></td>
                    </tr>
                    <tr>
                        <td>Tier 5: Adoption Round</td>
                        <td>$0.085</td>
                        <td>50M Tokens</td>
                        <td>$50 / $5,000</td>
                        <td>25% at TGE, 6 months</td>
                        <td><span class="badge bg-secondary">Upcoming</span></td>
                    </tr>
                    <tr>
                        <td>Tier 6: Launch Round</td>
                        <td>$0.100</td>
                        <td>50M Tokens</td>
                        <td>$20 / $5,000</td>
                        <td>30% at TGE, 4 months</td>
                        <td><span class="badge bg-secondary">Upcoming</span></td>
                    </tr>
                    <tr>
                        <td>Tier 7: Final Round</td>
                        <td>$0.120</td>
                        <td>50M Tokens</td>
                        <td>$20 / $5,000</td>
                        <td>40% at TGE, 3 months</td>
                        <td><span class="badge bg-secondary">Upcoming</span></td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="purchase-form" class="row mt-5">
            <div class="col-lg-6 mx-auto">
                <div class="purchase-form">
                    <h3 class="text-center mb-4">Purchase Tokens</h3>

                    <!-- Wallet Connection Message -->
                    <div id="connectWalletMessage" class="alert alert-info">
                        <p class="mb-0">Please connect your wallet to participate in the presale.</p>
                        <button class="btn btn-primary mt-3 btn-connect-wallet">Connect Wallet</button>
                    </div>

                    <!-- Wrong Network Message -->
                    <div id="wrongNetworkMessage" class="alert alert-warning d-none">
                        <p class="mb-0">Please switch to Polygon Mainnet to participate in the presale.</p>
                        <button class="btn btn-primary mt-3 btn-switch-network">Switch Network</button>
                    </div>

                    <!-- Purchase Form -->
                    <form id="purchaseForm" class="d-none">
                        <div class="mb-3">
                            <label for="tier" class="form-label">Select Tier</label>
                            <select class="form-select" id="tier" required>
                                <option value="1" disabled>Tier 1 - Completed</option>
                                <option value="2" selected>Tier 2 - Active ($0.045)</option>
                                <option value="3" disabled>Tier 3 - Upcoming ($0.055)</option>
                                <option value="4" disabled>Tier 4 - Upcoming ($0.070)</option>
                                <option value="5" disabled>Tier 5 - Upcoming ($0.085)</option>
                                <option value="6" disabled>Tier 6 - Upcoming ($0.100)</option>
                                <option value="7" disabled>Tier 7 - Upcoming ($0.120)</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="amount" class="form-label">USDC Amount</label>
                            <input type="number" class="form-control" id="amount" placeholder="Min: 100 USDC, Max: 25,000 USDC" min="100" max="25000" required>
                            <div class="form-text">You will receive approximately <span id="tokenEstimate">0</span> TEACH tokens.</div>
                        </div>

                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="termsCheck" required>
                            <label class="form-check-label" for="termsCheck">I agree to the <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms and Conditions</a></label>
                        </div>

                        <button type="submit" class="btn btn-primary btn-purchase">Purchase Now</button>

                        <!-- Alerts -->
                        <div id="errorAlert" class="alert alert-danger mt-3 d-none"></div>
                        <div id="successAlert" class="alert alert-success mt-3 d-none"></div>
                    </form>

                    <!-- Purchase History -->
                    <div id="purchaseHistory" class="mt-4 d-none">
                        <h4 class="text-center">Your Purchase History</h4>
                        <div class="user-stats">
                            <div class="user-stat-item">
                                <span class="user-stat-label">Total Purchased:</span>
                                <span class="user-stat-value" id="purchasedTokens">0 TEACH</span>
                            </div>
                            <div class="user-stat-item">
                                <span class="user-stat-label">Total Spent:</span>
                                <span class="user-stat-value" id="purchasedAmount">0 USDC</span>
                            </div>
                            <div class="user-stat-item">
                                <span class="user-stat-label">Vesting Status:</span>
                                <span class="user-stat-value">Locked until TGE</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="vesting-info mt-5">
            <h3 class="text-center mb-4">Vesting Schedule</h3>
            <p class="text-center">Tokens purchased during the presale will be subject to vesting periods to ensure project stability and long-term value.</p>

            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="vesting-diagram">
                        <img src="~/images/vesting-diagram.svg" alt="Token Vesting Schedule" class="img-fluid">
                    </div>
                </div>
            </div>

            <div class="vesting-notes mt-4">
                <div class="row">
                    <div class="col-md-6">
                        <div class="info-card">
                            <h5>TGE (Token Generation Event)</h5>
                            <p>A portion of your purchased tokens will be immediately available after the TGE. The percentage depends on your purchase tier, ranging from 10% to 40%.</p>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="info-card">
                            <h5>Linear Vesting</h5>
                            <p>The remaining tokens will be gradually unlocked on a monthly basis throughout the vesting period. For example, if your tier has a 12-month vesting period, you'll receive approximately 7.5% of your remaining tokens each month.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>